<html>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        var canvas;
        var canvasContext;
        var ballX = 50;
        var ballSpeedX = 10;
        var ballY = 50;
        var ballSpeedY = 4;
        var leftPaddleX
        var leftPaddleY = 250;
        var rightPaddleX
        var rightPaddleY
        const paddleHeight = 85;

        function locateMouse(event) {
            var rect = canvas.getBoundingClientRect();
            var root = document.documentElement;
            var mouseX = event.clientX - rect.left - root.scrollLeft;
            var mouseY = event.clientY - rect.top - root.scrollTop;
            return {
                x:mouseX,y:mouseY
            }
        }

        window.onload = function() {
            //console.log("Start");
            canvas = document.getElementById('gameCanvas');
            canvasContext = canvas.getContext('2d');
            
            var fps = 30;
            setInterval(drawAndMove, 1000/fps)

            canvas.addEventListener('mousemove',
                function(event) {
                    var mouseLoc = locateMouse(event);
                    leftPaddleY = mouseLoc.y-(paddleHeight/2);
                });
        }

        function drawAndMove() {
            moveAll();
            drawAll();
        }

        function moveAll() {
            ballX = ballX + ballSpeedX;
            ballY = ballY + ballSpeedY;
            if (ballX >= canvas.width) {
                ballSpeedX = -ballSpeedX;
            }
            if (ballX < 0) {
                ballSpeedX = -ballSpeedX;
            }
            if (ballY >= canvas.height) {
                ballSpeedY = -ballSpeedY;
            }
            if (ballX < 0) {
                ballSpeedY = -ballSpeedY;
            }
        }

        function drawAll() {
            //background
            colorRect(0,0,canvas.width,canvas.height,'black');

            //left paddle
            colorRect(15,leftPaddleY,10,90,'white');

            //ball
            canvasContext.beginPath()
            colorRect(ballX,ballY,15,15,'green');
            canvasContext.fill()
        }

        function colorRect(leftX,topY, width,height, drawColor) {
            canvasContext.fillStyle = drawColor;
            canvasContext.fillRect(leftX,topY, width,height);
        }
    </script>
</html>